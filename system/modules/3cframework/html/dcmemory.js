/**
 * Class AjaxRequestMemory
 *
 * Provide methods to handle Ajax requests.
 * @copyright  Leo Feyer 2005-2012
 * @copyright  MEN AT WORK 2012
 * @package    Backend
 */
var AjaxRequestMemory={toggleFiletree:function(b,h,d,f,a,g){b.blur();var c=$(h);var e=$(b).getFirst();if(c){if(c.getStyle("display")=="none"){c.setStyle("display","inline");e.src=e.src.replace("folPlus.gif","folMinus.gif");$(b).title=CONTAO_COLLAPSE;new Request.Contao({field:b}).post({action:"toggleFiletreeMemory",id:h,state:1,REQUEST_TOKEN:REQUEST_TOKEN})}else{c.setStyle("display","none");e.src=e.src.replace("folMinus.gif","folPlus.gif");$(b).title=CONTAO_EXPAND;new Request.Contao({field:b}).post({action:"toggleFiletreeMemory",id:h,state:0,REQUEST_TOKEN:REQUEST_TOKEN})}return false}new Request.Contao({field:b,onRequest:AjaxRequest.displayBox("Loading data …"),onSuccess:function(i,k){var j=new Element("ul");j.addClass("level_"+g);j.set("html",i);c=new Element("li");c.addClass("parent");c.setProperty("id",h);c.setStyle("display","inline");j.injectInside(c);c.injectAfter($(b).getParent("li"));$(b).title=CONTAO_COLLAPSE;e.src=e.src.replace("folPlus.gif","folMinus.gif");AjaxRequest.hideBox();window.fireEvent("ajax_change")}}).post({action:"loadFiletreeMemory",id:h,level:g,folder:d,field:f,name:a,state:1,REQUEST_TOKEN:REQUEST_TOKEN});return false},reloadFiletrees:function(){$$(".filetree").each(function(b){var a=b.id;var c=a.replace(/_[0-9]+$/,"");new Request.Contao({onRequest:AjaxRequest.displayBox("Loading data …"),onSuccess:function(e,g){var f=$(b.id+"_parent").getFirst("ul");var d=f.getLast("li");f.set("html",e);d.inject(f);AjaxRequest.hideBox();window.fireEvent("ajax_change")}}).post({action:"loadFiletree",field:c,name:a,REQUEST_TOKEN:REQUEST_TOKEN})})},toggleSubpalette:function(a,d,c){a.blur();var b=$(d);if(b){if(!a.value){a.value=1;a.checked="checked";b.setStyle("display","block");new Request.Contao({field:a}).post({action:"DcMemToggleSubpalette",id:d,field:c,state:1,REQUEST_TOKEN:REQUEST_TOKEN})}else{a.value="";a.checked="";b.setStyle("display","none");new Request.Contao({field:a}).post({action:"DcMemToggleSubpalette",id:d,field:c,state:0,REQUEST_TOKEN:REQUEST_TOKEN})}return}new Request.Mixed({field:a,onRequest:AjaxRequest.displayBox("Loading data …"),onSuccess:function(e,g,f){b=new Element("div");b.setProperty("id",d);b.set("html",e);b.injectAfter($(a).getParent("div").getParent("div"));if(g){$exec(g)}a.value=1;a.checked="checked";b.setStyle("display","block");AjaxRequest.hideBox();Backend.hideTreeBody();Backend.addInteractiveHelp();Backend.addColorPicker();window.fireEvent("subpalette");window.fireEvent("ajax_change")}}).post({action:"DcMemToggleSubpalette",id:d,field:c,load:1,state:1,REQUEST_TOKEN:REQUEST_TOKEN})}};